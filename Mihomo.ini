# Clash Meta 优化配置
# 版本 V1.19-250408
# 完整整合 blackmatrix7 规则集和自定义策略组

mode: rule
ipv6: true
log-level: info
allow-lan: true
mixed-port: 7890
external-controller: :9090
unified-delay: true
tcp-concurrent: true
geodata-mode: true

# Geo 数据库
geox-url:
  geoip: "https://ghfast.top/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat"
  geosite: "https://ghfast.top/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://ghfast.top/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country.mmdb"

# 订阅配置
proxy-providers:
  订阅一:
    type: http
    interval: 3600
    health-check:
      enable: true
      url: https://cp.cloudflare.com
      interval: 300
      timeout: 1000
      tolerance: 100
    url: "https://your-subscription-url-1.com"
    path: ./proxy_provider/订阅一.yaml

  订阅二:
    type: http
    interval: 3600
    health-check:
      enable: true
      url: https://cp.cloudflare.com
      interval: 300
      timeout: 1000
      tolerance: 100
    url: "https://your-subscription-url-2.com"
    path: ./proxy_provider/订阅二.yaml

# 策略组定义
proxy-groups:

  - name: ♻️ 自动选择
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    include-all: true

  - name: 🚀 手动选择
    include-all: true
    type: select


  - name: 🚀 出国代理
    type: select
    proxies:
      - ♻️ 自动选择
      - DIRECT
      - 🚀 手动选择
      
  - name: 🎯 全球直连
    type: select
    proxies:
      - DIRECT
      - 🚀 手动选择

  - name: 🛑 全球拦截
    type: select
    proxies:
      - REJECT
      - DIRECT
      - 🚀 手动选择

  - name: 🍃 应用净化
    type: select
    proxies:
      - DIRECT
      - REJECT
      - 🚀 手动选择

  - name: 🐟 漏网之鱼
    type: select
    proxies:
      - 🎯 全球直连
      - 🚀 出国代理
      - 🚀 手动选择

# 规则集定义
rule-providers:
  China:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/China/China.list"
    path: ./ruleset/China.yaml
    interval: 86400

  Proxy:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Proxy/Proxy.list"
    path: ./ruleset/Proxy.yaml
    interval: 86400

  OpenAI:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.list"
    path: ./ruleset/OpenAI.yaml
    interval: 86400

  Advertising:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Advertising/Advertising.list"
    path: ./ruleset/Advertising.yaml
    interval: 86400

  AdvertisingLite:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AdvertisingLite/AdvertisingLite.list"
    path: ./ruleset/AdvertisingLite.yaml
    interval: 86400

  Lan:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Lan/Lan.list"
    path: ./ruleset/Lan.yaml
    interval: 86400

  Unblock:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Unblock/Unblock.list"
    path: ./ruleset/Unblock.yaml
    interval: 86400

  GoogleFCM:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GoogleFCM/GoogleFCM.list"
    path: ./ruleset/GoogleFCM.yaml
    interval: 86400

  GoogleCN:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GoogleCN/GoogleCN.list"
    path: ./ruleset/GoogleCN.yaml
    interval: 86400

  SteamCN:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/SteamCN/SteamCN.list"
    path: ./ruleset/SteamCN.yaml
    interval: 86400

  GitHub:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.list"
    path: ./ruleset/GitHub.yaml
    interval: 86400

  YouTube:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.list"
    path: ./ruleset/YouTube.yaml
    interval: 86400

  Google:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.list"
    path: ./ruleset/Google.yaml
    interval: 86400

  Bing:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bing/Bing.list"
    path: ./ruleset/Bing.yaml
    interval: 86400

  OneDrive:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OneDrive/OneDrive.list"
    path: ./ruleset/OneDrive.yaml
    interval: 86400

  Microsoft:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.list"
    path: ./ruleset/Microsoft.yaml
    interval: 86400

  Apple:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.list"
    path: ./ruleset/Apple.yaml
    interval: 86400

  Telegram:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.list"
    path: ./ruleset/Telegram.yaml
    interval: 86400

  Speedtest:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Speedtest/Speedtest.list"
    path: ./ruleset/Speedtest.yaml
    interval: 86400

  Epic:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Epic/Epic.list"
    path: ./ruleset/Epic.yaml
    interval: 86400

  Origin:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Origin/Origin.list"
    path: ./ruleset/Origin.yaml
    interval: 86400

  Sony:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Sony/Sony.list"
    path: ./ruleset/Sony.yaml
    interval: 86400

  Steam:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.list"
    path: ./ruleset/Steam.yaml
    interval: 86400

  Nintendo:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Nintendo/Nintendo.list"
    path: ./ruleset/Nintendo.yaml
    interval: 86400

  Netflix:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.list"
    path: ./ruleset/Netflix.yaml
    interval: 86400

  TikTok:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.list"
    path: ./ruleset/TikTok.yaml
    interval: 86400

  ChinaMedia:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMedia/ChinaMedia.list"
    path: ./ruleset/ChinaMedia.yaml
    interval: 86400

  GlobalMedia:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia.list"
    path: ./ruleset/GlobalMedia.yaml
    interval: 86400

  GFW:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GFW/GFW.list"
    path: ./ruleset/GFW.yaml
    interval: 86400

  ChinaDomain:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaDomain/ChinaDomain.list"
    path: ./ruleset/ChinaDomain.yaml
    interval: 86400

  ChinaIP:
    type: http
    behavior: ipcidr
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaIP/ChinaIP.list"
    path: ./ruleset/ChinaIP.yaml
    interval: 86400

  Download:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Download/Download.list"
    path: ./ruleset/Download.yaml
    interval: 86400

# 规则定义
rules:
  # 广告拦截
  - RULE-SET,Advertising,🛑 全球拦截
  - RULE-SET,AdvertisingLite,🍃 应用净化
  
  # 国内直连
  - RULE-SET,China,🎯 全球直连
  - RULE-SET,ChinaMedia,🎯 全球直连
  - RULE-SET,ChinaDomain,🎯 全球直连
  - RULE-SET,GoogleCN,🎯 全球直连
  - RULE-SET,SteamCN,🎯 全球直连
  - RULE-SET,Apple,🎯 全球直连
  - RULE-SET,Speedtest,🎯 全球直连
  - RULE-SET,Download,🎯 全球直连
  
  # 特殊服务
  - RULE-SET,GoogleFCM,🚀 出国代理
  - RULE-SET,Telegram,🚀 出国代理
  - RULE-SET,OpenAI,🚀 出国代理
  
  # 国际服务
  - RULE-SET,Proxy,🚀 出国代理
  - RULE-SET,YouTube,🚀 出国代理
  - RULE-SET,Google,🚀 出国代理
  - RULE-SET,Bing,🚀 出国代理
  - RULE-SET,OneDrive,🚀 出国代理
  - RULE-SET,Microsoft,🚀 出国代理
  - RULE-SET,GitHub,🚀 出国代理
  - RULE-SET,Epic,🚀 出国代理
  - RULE-SET,Origin,🚀 出国代理
  - RULE-SET,Sony,🚀 出国代理
  - RULE-SET,Steam,🚀 出国代理
  - RULE-SET,Nintendo,🚀 出国代理
  - RULE-SET,Netflix,🚀 出国代理
  - RULE-SET,TikTok,🚀 出国代理
  - RULE-SET,GlobalMedia,🚀 出国代理
  - RULE-SET,GFW,🚀 出国代理
  
  # 网络基础
  - RULE-SET,Lan,🎯 全球直连
  - RULE-SET,Unblock,🎯 全球直连
  - RULE-SET,ChinaIP,🎯 全球直连
  
  # GEO规则
  - GEOSITE,CN,🎯 全球直连
  - GEOSITE,geolocation-!cn,🚀 出国代理
  - GEOIP,CN,🎯 全球直连,no-resolve
  
  # 最终规则
  - MATCH,🐟 漏网之鱼
