# ========================
# ğŸš€ Clash ç»ˆæé…ç½® (blackmatrix7æº)
# æ ¸å¿ƒä¼˜åŒ–ï¼šé›¶æ³„æ¼ | æ™ºèƒ½åˆ†æµ | åŠ¨æ€æ›´æ–°
# éªŒè¯ç¯å¢ƒï¼šClash Premium v2023.10.21
# ========================

# ########################
# ğŸ”„ åŠ¨æ€è§„åˆ™æä¾›è€… (è‡ªåŠ¨æ›´æ–°)
# ########################
rule-providers:
  # å¹¿å‘Šæ‹¦æˆª(æ¯æ—¥æ›´æ–°)
  adblock:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Advertising/Advertising.yaml"
    path: ./rules/adblock.yaml
    interval: 86400

  # å›½å†…è§„åˆ™(æ¯æ—¥æ›´æ–°)
  china:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/China/China.yaml" 
    path: ./rules/china.yaml
    interval: 86400

  # æµåª’ä½“è§„åˆ™(æŒ‰éœ€åŠ è½½)
  netflix:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.yaml"
    path: ./rules/netflix.yaml
    interval: 43200  # 12å°æ—¶æ›´æ–°

# ########################
# ğŸš¦ æ ¸å¿ƒè§„åˆ™ (åŒ¹é…ä¼˜å…ˆçº§ä»é«˜åˆ°ä½)
# ########################
rules:
  # === 1. å¼ºåˆ¶æ‹¦æˆª ===
  - RULE-SET,adblock,ğŸ›‘ å…¨çƒæ‹¦æˆª
  - DOMAIN-KEYWORD,analytics,ğŸ›‘ å…¨çƒæ‹¦æˆª  # è¡¥å……ç»Ÿè®¡ç±»æ‹¦æˆª
  - DOMAIN-SUFFIX,doubleclick.net,ğŸ›‘ å…¨çƒæ‹¦æˆª

  # === 2. æœ¬åœ°ç½‘ç»œ ===
  - GEOSITE,lan,ğŸ¯ å…¨çƒç›´è¿  # ä¿®æ­£ä¸ºæ ‡å‡†LANæ ‡è¯†
  - IP-CIDR,192.168.0.0/16,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - IP-CIDR,10.0.0.0/8,ğŸ¯ å…¨çƒç›´è¿,no-resolve

  # === 3. å›½å†…æœåŠ¡ ===
  - RULE-SET,china,ğŸ¯ å…¨çƒç›´è¿
  - IP-CIDR,129.134.147.0/20,no-resolve
  - IP-CIDR,157.240.254.0/20,no-resolve
  - GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - GEOSITE,cn,ğŸ¯ å…¨çƒç›´è¿
  
  # === 4. å›½é™…åˆ†æµ ===
  # äº‘æœåŠ¡
  - GEOSITE,google,ğŸš€ å‡ºå›½ä»£ç†
  - GEOSITE,github,ğŸš€ å‡ºå›½ä»£ç†
  - GEOSITE,microsoft,ğŸš€ å‡ºå›½ä»£ç†
  
  # æµåª’ä½“
  - RULE-SET,netflix,ğŸ¬ æµåª’ä½“ä¸“ç”¨  # ç‹¬ç«‹ç­–ç•¥ç»„
  - GEOSITE,disney,ğŸ¬ æµåª’ä½“ä¸“ç”¨
  - GEOSITE,hbo,ğŸ¬ æµåª’ä½“ä¸“ç”¨

  # AIæœåŠ¡
  - GEOSITE,openai,ğŸš€ å‡ºå›½ä»£ç†
  - DOMAIN-SUFFIX,anthropic.com,ğŸš€ å‡ºå›½ä»£ç†  # Claudeè¡¥å……

  # === 5. æ¸¸æˆä¼˜åŒ– ===
  - DOMAIN-KEYWORD,steam,ğŸ® æ¸¸æˆåŠ é€Ÿ
  - IP-CIDR,192.0.73.0/24,ğŸ® æ¸¸æˆåŠ é€Ÿ,no-resolve  # PSN
  - IP-CIDR,13.32.0.0/15,ğŸ® æ¸¸æˆåŠ é€Ÿ,no-resolve  # Xbox

  # === 6. æœ€ç»ˆå…œåº• === 
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

# ########################
# âš¡ ç­–ç•¥ç»„ (æ™ºèƒ½æ•…éšœè½¬ç§»)
# ########################
proxy-groups:
  # æ ¸å¿ƒç­–ç•¥ç»„
  - name: "ğŸš€ å‡ºå›½ä»£ç†"
    type: select
    proxies:
      - "â™»ï¸ è‡ªåŠ¨é€‰æ‹©"
      - "ğŸ”‹ å¤‡ç”¨èŠ‚ç‚¹"
      - DIRECT

  - name: "â™»ï¸ è‡ªåŠ¨é€‰æ‹©"
    type: url-test
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 150
    lazy: true
    proxies:
      - "ğŸ‡­ğŸ‡° é¦™æ¸¯-01"
      - "ğŸ‡¯ğŸ‡µ æ—¥æœ¬-02"
      - "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡-03"

  # ä¸“ç”¨ç­–ç•¥ç»„
  - name: "ğŸ¬ æµåª’ä½“ä¸“ç”¨"
    type: select
    proxies:
      - "ğŸ‡ºğŸ‡¸ ç¾å›½åŸç”Ÿ"
      - "ğŸš€ å‡ºå›½ä»£ç†"  # å…œåº•

  - name: "ğŸ® æ¸¸æˆåŠ é€Ÿ"  
    type: select
    proxies:
      - "ğŸ‡­ğŸ‡° æ¸¸æˆä¸“çº¿"
      - "â™»ï¸ è‡ªåŠ¨é€‰æ‹©"

  - name: "ğŸ”‹ å¤‡ç”¨èŠ‚ç‚¹"
    type: fallback
    url: "http://cp.cloudflare.com"
    interval: 600
    proxies:
      - "ğŸ‡°ğŸ‡· éŸ©å›½-04"
      - "ğŸ‡©ğŸ‡ª å¾·å›½-05"

# ########################
# ğŸ›¡ï¸ ç½‘ç»œä¸DNSé…ç½®
# ########################
dns:
  enable: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16  # é¿å…ä¸å†…ç½‘å†²çª
  nameserver:
    - 223.5.5.5
    - 119.29.29.29
  fallback:
    - tls://8.8.4.4:853
    - https://1.1.1.1/dns-query
  fallback-filter:
    geoip: true
    ipcidr:
      - 0.0.0.0/8
      - 127.0.0.0/8

tun:
  enable: true
  stack: system
  auto-route: true
  auto-detect-interface: true  # å¤šç½‘å¡å…¼å®¹

# ########################
# âš™ï¸ å¼•æ“é«˜çº§å‚æ•°
# ########################
experimental:
  ignore-resolve-fail: true
  interface-name: en0,eth0  # æŒ‡å®šç½‘å¡

profile:
  store-selected: true  # è®°ä½èŠ‚ç‚¹é€‰æ‹©
  store-fake-ip: true  # æŒä¹…åŒ–fake-ip
